<script type="text/javascript" charset="utf-8">

// global variables
window.g = {
  i18n: <%=raw (t("javascript_mobile").merge :wnames => t("widgets.names")).to_json %>,
  i18n_locale: "<%= I18n.locale.to_s %>",
  width: 320,
  height: 480,
  topBarHeight: 0,
  topBarMaxHeight: <%= @is_preview_mode ? 125 : 256 %>,
  couchLocation: '<%=escape_javascript @company.couch_host %>',
  db_name: '<%=escape_javascript @company.db_name %>',
  company: '<%=escape_javascript @company.name %>',
  slogan: "<%=escape_javascript @company.settings.slogan %>",
  logo: "<%=escape_javascript @company.logo.url(:mobile) %>",
  banner: "<%=escape_javascript @company.banner.url(:mobile) %>",
  isPreview: <%= @is_preview_mode.present? %>,
  isBuilder: <%= @is_builder.present? %>,
  isTablet: /<%= tablet_devices %>/i.test( navigator.userAgent.toLowerCase() ),
  isMobile: /<%= mobile_devices %>/i.test( navigator.userAgent.toLowerCase() )
};
window.widgetClasses = {};
window.widgetPages = {};
window.widgetEditors = {};

bdata = <%= raw widget_docs %>;

</script>
