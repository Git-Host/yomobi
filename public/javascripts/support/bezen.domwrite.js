
window.bezen=window.bezen||(function(){var nix=function(){};var $=function(id){return document.getElementById(id);};return{$:$,nix:nix,_:{}};}());
bezen.object=(function(){var beget=function(prototype){var F=function(){};F.prototype=prototype;return new F();};var exists=function(object){if(object===null||object===undefined){return false;}
for(var i=1;i<arguments.length;i++){object=object[arguments[i]];if(object===null||object===undefined){return false;}}
return true;};var isArray=function(that){var result=that&&typeof that==='object'&&typeof that.length==='number'&&typeof that.splice==='function'&&!(that.propertyIsEnumerable('length'));return result?true:false;};var isString=function(that){return typeof that==='string'||that instanceof String;};return{beget:beget,exists:exists,isArray:isArray,isString:isString,_:{}};}());
bezen.error=(function(){var unsafeSetTimeout=window.setTimeout,unsafeSetInterval=window.setInterval;var reportError=function(error,url,line){if(!bezen.log){return;}
if(typeof error==='object'){reportError(error.message,error.fileName,error.lineNumber);return;}
bezen.log.error(error+' at '+url+'['+line+']',true);};var onerror=function(message,url,line){reportError('window.onerror: '+message,url,line);return true;};var catchError=function(func,description){description=description||'error.catchError';if(typeof func!=='function'){reportError(description+': A function is expected, found '+typeof func);return bezen.nix;}
var safefunc=function(){try{return func.apply(this,arguments);}catch(e){if(window.onerror){window.onerror(description+': '+e.message+' in '+func,e.fileName,e.lineNumber,true);}}};return safefunc;};var safeSetTimeout=function(func,delay){if(typeof func==='string'){if(bezen.log){bezen.log.warn('window.setTimeout: eval is evil: "'+func+'"');}
func=new Function(func);}
return unsafeSetTimeout(catchError(func,'window.setTimeout'),delay);};var safeSetInterval=function(func,delay){if(typeof func==='string'){if(bezen.log){bezen.log.warn('window.setInterval: eval is evil: "'+func+'"');}
func=new Function(func);}
return unsafeSetInterval(catchError(func,'window.setInterval'),delay);};var catchAll=function(){window.onerror=onerror;window.setTimeout=safeSetTimeout;window.setInterval=safeSetInterval;};return{reportError:reportError,onerror:onerror,safeSetTimeout:safeSetTimeout,safeSetInterval:safeSetInterval,catchError:catchError,catchAll:catchAll,_:{}};}());
bezen.string=(function(){var trim=function(string){string=string.replace(/^\s\s*/,'');return string.replace(/\s\s*$/,'');};var startsWith=function(string,prefix){prefix=String(prefix);return string.slice(0,prefix.length)===prefix;};var endsWith=function(string,suffix){suffix=String(suffix);return string.slice(string.length-suffix.length)===suffix;};return{trim:trim,startsWith:startsWith,endsWith:endsWith,_:{}};}());
bezen.array=(function(){var ARRAY=[];var empty=function(array){array.length=0;};var last=function(array){if(!array||array.length===0){return null;}
return array[array.length-1];};var push=function(array,item){if(Array.push){return Array.push(array,item);}else{return ARRAY.push.call(array,item);}};var pop=function(array){if(Array.pop){return Array.pop(array);}else{return ARRAY.pop.call(array);}};var shift=function(array){if(Array.shift){return Array.shift(array);}else{return ARRAY.shift.call(array);}};var unshift=function(array,item){if(Array.unshift){return Array.unshift(array,item);}else{return ARRAY.unshift.call(array,item);}};var copy=function(array){if(!array){return null;}
var duplicate=[];for(var i=0;i<array.length;i++){duplicate.push(array[i]);}
return duplicate;};var hash=function(array){if(!array){return null;}
var arrayhash={};for(var i=0;i<array.length;i++){arrayhash[array[i]]=true;}
return arrayhash;};return{empty:empty,last:last,push:push,pop:pop,shift:shift,unshift:unshift,copy:copy,hash:hash,_:{}};}());
bezen.dom=(function(){var catchError=bezen.error.catchError;var ELEMENT_NODE=1,ATTRIBUTE_NODE=2,TEXT_NODE=3;var element=function(name,attributes){var parent=document.createElement(name);if(!attributes){return parent;}
for(var attribute in attributes){if(attributes.hasOwnProperty(attribute)){parent.setAttribute(attribute,attributes[attribute]);}}
if(parent.canHaveChildren===false){return parent;}
for(var i=2;i<arguments.length;i++){var child=arguments[i];if(typeof child==='string'){child=document.createTextNode(child);}
parent.appendChild(child);}
return parent;};var clear=function(element){if(element.canHaveChildren===false){return;}
element.innerHTML='';};var insertBefore=function(node,newNode){var parent=node.parentNode;parent.insertBefore(newNode,node);};var insertAfter=function(node,newNode){var parent=node.parentNode;parent.insertBefore(newNode,node.nextSibling);};var remove=function(element){if(element.parentNode&&element.parentNode.innerHTML){element.parentNode.removeChild(element);}};var hasAttribute=function(node,attributeName){if(node.hasAttribute){return node.hasAttribute(attributeName);}
var attributeNode=node.getAttributeNode(attributeName);if(attributeNode===null){return false;}
return attributeNode.specified;};var appendScript=function(parent,scriptElt,listener){var safelistener=catchError(listener,'script.onload');if(scriptElt.readyState&&scriptElt.onload!==null){scriptElt.onreadystatechange=function(){if(scriptElt.readyState==="loaded"||scriptElt.readyState==="complete"){scriptElt.onreadystatechange=null;scriptElt.onerror=null;safelistener();}};}else{scriptElt.onload=safelistener;}
parent.appendChild(scriptElt);};return{ELEMENT_NODE:ELEMENT_NODE,ATTRIBUTE_NODE:ATTRIBUTE_NODE,TEXT_NODE:TEXT_NODE,element:element,clear:clear,insertBefore:insertBefore,insertAfter:insertAfter,remove:remove,hasAttribute:hasAttribute,appendScript:appendScript,_:{}};}());
bezen.domwrite=(function(){var nix=bezen.nix,trim=bezen.string.trim,empty=bezen.array.empty,hasAttribute=bezen.dom.hasAttribute,appendScript=bezen.dom.appendScript,originalDocumentWrite=document.write,originalDocumentWriteln=document.writeln;var markupArray=[];var domWrite=function(markup){markupArray.push(markup);};var domWriteln=function(markup){domWrite(markup+'\n');};var collectMarkup=function(){if(markupArray.length===0){return null;}
var markup=markupArray.join('');empty(markupArray);return markup;};var parseMarkup=function(markup){var divParser=document.createElement("div");divParser.innerHTML='<br/>'+markup;divParser.removeChild(divParser.firstChild);return divParser.firstChild;};var isJavascriptScript=function(node){if(node.nodeName!=="SCRIPT"){return false;}
if(node.language&&node.language.toLowerCase()!=="javascript"){return false;}
if(node.type&&trim(node.type).toLowerCase()!=="text/javascript"){return false;}
return true;};var appendScriptClone=function(parent,scriptElt,listener){if(hasAttribute(scriptElt,"src")){var externalScript=document.createElement("script");for(var i=0;i<scriptElt.attributes.length;i++){var attribute=scriptElt.attributes[i];if(hasAttribute(scriptElt,attribute.name)){externalScript.setAttribute(attribute.name,attribute.value);}}
externalScript.text=scriptElt.text;appendScript(parent,externalScript,listener);}else{var internalScript=scriptElt.cloneNode(false);internalScript.text=scriptElt.text;internalScript.type="any";parent.appendChild(internalScript);if(hasAttribute(scriptElt,"type")){internalScript.setAttribute("type",scriptElt.type);}else{internalScript.removeAttribute("type");}
(new Function(internalScript.text))();listener();}};var render;var loadPiecemeal=function(parent,input,callback){if(input===null){callback();return;}
var nextInput=null;var nextParent=parent;var nextStep=function(){loadPiecemeal(nextParent,nextInput,callback);};if(isJavascriptScript(input)){setTimeout(function(){appendScriptClone(parent,input,function(){render(parent,nextStep);});},0);}else{var clone=input.cloneNode(false);parent.appendChild(clone);setTimeout(nextStep,0);if(input.firstChild){var scriptCount=input.getElementsByTagName('script').length;if(scriptCount===0){clone.innerHTML=input.innerHTML;}else{nextInput=input.firstChild;nextParent=clone;}}}
if(nextInput===null){nextInput=input.nextSibling;}
var inputAncestor=input.parentNode;while(nextInput===null&&inputAncestor!==null){nextInput=inputAncestor.nextSibling;nextParent=nextParent.parentNode;inputAncestor=inputAncestor.parentNode;}
return;};var capture=function(){var dom=document;if(dom.write===originalDocumentWrite){dom.write=domWrite;}
if(dom.writeln===originalDocumentWriteln){dom.writeln=domWriteln;}};render=function(parent,callback){if(parent instanceof Function){callback=parent;parent=document.body;}else{parent=parent||document.body;callback=callback||nix;}
var markup=collectMarkup();if(markup===null){callback();}else{loadPiecemeal(parent,parseMarkup(markup),callback);}};var restore=function(){document.write=originalDocumentWrite;document.writeln=originalDocumentWriteln;};return{capture:capture,parseMarkup:parseMarkup,render:render,restore:restore,_:{markupArray:markupArray,domWrite:domWrite,domWriteln:domWriteln,collectMarkup:collectMarkup,isJavascriptScript:isJavascriptScript,appendScriptClone:appendScriptClone,loadPiecemeal:loadPiecemeal}};}());